<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>DES Description</title>
        <meta charset="UTF-8">
        <link href="style.css" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
        <script src="../JavaScript/DES.js"></script>
        <script language="javascript">
            function populateValues(mode) {
                var txtMessage = document.getElementById("txtMessage").value;
                var txtKey = document.getElementById("txtKey").value;
                var dataDiv = document.getElementById("data");
                dataDiv.style.visibility = "visible";
                removeRows("tblKeys");
                var data = [];
                if (mode === "encode") {
                    //data = encode(get64Bin(string2Bin(txtMessage)), get64Bin(string2Bin(txtKey)));
                    data = encode(get64Bin(string2Bin(txtMessage)), txtKey);
                } else {
                    data = decode(txtMessage, get64Bin(string2Bin(txtKey)));
                }
                printData(data);
            };

            function removeRows(tblName) {
                var elmtTable = document.getElementById(tblName);
                var tableRows = elmtTable.getElementsByTagName('tr');
                var rowCount = tableRows.length;
                for (var x = rowCount - 1; x > 0; x--) {
                    elmtTable.deleteRow(x);
                }
            }

            function printData(data) {
                var lblKeyPermutation1 = document.getElementById("keyPermutation1");
                lblKeyPermutation1.innerHTML = data[0];

                var lblMessageInitialPermutation = document.getElementById("messageInitialPermutation");
                lblMessageInitialPermutation.innerHTML = data[2];

                var lblOutput = document.getElementById("lblOutput");
                lblOutput.innerHTML = data[4];

                var keysArray = data[1];
                var messagesArray = data[3];
                for (var i = 0, len = keysArray.length; i < len -1; i++) {
                    if (keysArray[i + 1] !== 0) {
                        var row = addNewRow("tblKeys");

                        // Insert new cells (<td> elements) at the 1st and 2nd position of the "new" <tr> element:
                        var cell1 = row.insertCell(0);
                        var cell2 = row.insertCell(1);
                        var cell3 = row.insertCell(2);

                        // Add some text to the new cells:
                        cell1.innerHTML = i + 1;
                        cell2.innerHTML = keysArray[i + 1];
                        cell3.innerHTML = messagesArray[i];
                    }
                };

                function addNewRow(tableName) {
                    // Find a <table> element with id="myTable":
                    var table = document.getElementById(tableName);

                    // Create an empty <tr> element and add it to the last position of the table:
                    var row = table.insertRow(-1);

                    return row;
                };
            };

        </script>
    </head>    
    <body>
        <div id="nav1">
            <h1><a href="index.html"> DES Description </a></h1> 
            <ul>
                <li><a href="index.html"> Home </a></li>
                <li id="active"><a href="demonstration.html"> Demonstration </a></li>
                <li><a href="aboutus.html"> About Us </a></li>              
            </ul>
            
       </div>  
        <div id="header">
            <div id="posts">
                <label style="display: inline-block; width: 130px; text-align: right;">Message/Cipher: </label><input id="txtMessage" type="text" style="display: inline-block; width: 130px;"/>
                <br/><br/>
                <label style="display: inline-block; width: 130px; text-align: right;">Key: </label><input id="txtKey" type="text" style="display: inline-block; width: 130px;"/>
                <br/>
                <input id="btnEncrypt" type="button" value="Encode" onclick="populateValues('encode')"/>
                <input id="btnDecrypt" type="button" value="Decrypt" onclick="populateValues('decode')" />
                <div id="data" style="visibility: hidden">
                    <label>Key Permutation One: </label> <label id="keyPermutation1"></label>
                    <br/>
                    <label>Message Initial Permutation: </label><label id="messageInitialPermutation"></label>
                    <table id="tblKeys" style="width: 100%;">
                        <tr >
                            <td >Round</td>
                            <td >Key</td>
                            <td >Message</td>
                        </tr>
                    </table>
                    <label>Output: </label><label id="lblOutput"></label>
                </div>
            </div>
        </div>
        

        
        <footer>
            <div id="nav2">
            <ul>
                <li><a href="aboutus.html"> About Us </a></li> 
                <li><a href="references.html"> References </a></li>             
            </ul>
            </div>    
        </footer>  
        
        
    </body>
</html>