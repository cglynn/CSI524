<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>DES Description</title>
        <meta charset="UTF-8">
        <link href="style.css" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
        <script src="../JavaScript/DES.js"></script>
        <script language="javascript">
            function populateValues() {
                var txtMessage = document.getElementById("txtMessage").value;
                var txtKey = document.getElementById("txtKey").value;
                var dataDiv = document.getElementById("data");
                dataDiv.style.visibility = "visible";
                removeRows("tblKeys");
                printData(txtKey, txtMessage);
            };

            function removeRows(tblName) {
                var elmtTable = document.getElementById(tblName);
                var tableRows = elmtTable.getElementsByTagName('tr');
                var rowCount = tableRows.length;
                for (var x = rowCount - 1; x > 0; x--) {
                    elmtTable.deleteRow(x);
                }
            }

            function printData(txtKey, txtMessage) {
                var binKey = get64Bin(string2Bin(txtKey));
                var binMessage = get64Bin(string2Bin(txtMessage));
                var permcho1 = permutedChoice1(binKey);
                var keysArray = getAllKeys(permcho1);
                var messagesArray = getAllMessages(binMessage, binKey);
                
                var lblKeyPermutation1 = document.getElementById("keyPermutation1");
                lblKeyPermutation1.innerHTML = permcho1;

                var lblMessageInitialPermutation = document.getElementById("messageInitialPermutation");
                lblMessageInitialPermutation.innerHTML = initialPermutaion(binMessage);

                var lblOutput = document.getElementById("lblOutput");
                lblOutput.innerHTML = encode(binMessage, binKey);

                for (var i = 0, len = keysArray.length; i < len -1; i++) {

                    var row = addNewRow("tblKeys");

                    // Insert new cells (<td> elements) at the 1st and 2nd position of the "new" <tr> element:
                    var cell1 = row.insertCell(0);
                    var cell2 = row.insertCell(1);
                    var cell3 = row.insertCell(2);

                    // Add some text to the new cells:
                    cell1.innerHTML = i + 1;
                    cell2.innerHTML = keysArray[i + 1];
                    cell3.innerHTML = messagesArray[i];
                };

                function addNewRow(tableName) {
                    // Find a <table> element with id="myTable":
                    var table = document.getElementById(tableName);

                    // Create an empty <tr> element and add it to the last position of the table:
                    var row = table.insertRow(-1);

                    return row;
                };
            };

        </script>
    </head>    
    <body>
        <div id="nav1">
            <h1><a href="index.html"> DES Description </a></h1> 
            <ul>
                <li><a href="index.html"> Home </a></li>
                <li id="active"><a href="demonstration.html"> Demonstration </a></li>
                <li><a href="aboutus.html"> About Us </a></li>              
            </ul>
            
       </div>  
        <div id="header">
            <div id="posts">
                <label width="100">Message </label><input id="txtMessage" type="text" width="100"/>
                <br/>
                <label width="100">Key </label><input id="txtKey" type="text" width="100"/>
                <br/>
                <input id="btnEncrypt" type="button" value="Encode" onclick="populateValues()"/>
                <div id="data" style="visibility: hidden">
                    <label>Key Permutation One: </label> <label id="keyPermutation1"></label>
                    <br/>
                    <label>Message Initial Permutation: </label><label id="messageInitialPermutation"></label>
                    <table id="tblKeys" style="width: 100%;">
                        <tr >
                            <td >Round</td>
                            <td >Key</td>
                            <td >Message</td>
                        </tr>
                    </table>
                    <label>Output: </label><label id="lblOutput"></label>
                </div>
            </div>
        </div>
        

        
        <footer>
            <div id="nav2">
            <ul>
                <li><a href="aboutus.html"> About Us </a></li> 
                <li><a href="references.html"> References </a></li>             
            </ul>
            </div>    
        </footer>  
        
        
    </body>
</html>